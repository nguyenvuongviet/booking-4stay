generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model otp_codes {
  id        Int            @id @default(autoincrement())
  userId    Int?
  email     String         @db.VarChar(255)
  otp       String         @db.VarChar(10)
  type      otp_codes_type
  expiresAt DateTime       @db.Timestamp(0)
  isUsed    Boolean        @default(false)
  deletedBy Int            @default(0)
  isDeleted Boolean        @default(false)
  deletedAt DateTime?      @db.Timestamp(0)
  createdAt DateTime       @default(now()) @db.Timestamp(0)
  updatedAt DateTime       @default(now()) @db.Timestamp(0)
  users     users?         @relation(fields: [userId], references: [id], onUpdate: NoAction, map: "otp_codes_ibfk_1")

  @@index([userId], map: "userId")
}

model roles {
  id          Int       @id @default(autoincrement())
  name        String    @unique(map: "name") @db.VarChar(50)
  description String?   @db.Text
  isActive    Boolean   @default(true)
  deletedBy   Int       @default(0)
  isDeleted   Boolean   @default(false)
  deletedAt   DateTime? @db.Timestamp(0)
  createdAt   DateTime  @default(now()) @db.Timestamp(0)
  updatedAt   DateTime  @default(now()) @db.Timestamp(0)
  users       users[]
}

model users {
  id          Int            @id @default(autoincrement())
  email       String         @unique(map: "email") @db.VarChar(255)
  password    String?        @db.VarChar(255)
  fullName    String         @db.VarChar(255)
  phoneNumber String?        @db.VarChar(20)
  dateOfBirth DateTime?      @db.Date
  gender      users_gender?
  avatar      String?        @db.Text
  country     String?        @db.VarChar(100)
  isVerified  Boolean        @default(false)
  isActive    Boolean        @default(false)
  googleId    String?        @db.VarChar(255)
  provider    users_provider @default(LOCAL)
  lastLogin   DateTime?      @db.Timestamp(0)
  roleId      Int
  deletedBy   Int            @default(0)
  isDeleted   Boolean        @default(false)
  deletedAt   DateTime?      @db.Timestamp(0)
  createdAt   DateTime       @default(now()) @db.Timestamp(0)
  updatedAt   DateTime       @default(now()) @db.Timestamp(0)
  otp_codes   otp_codes[]
  roles       roles          @relation(fields: [roleId], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "users_ibfk_1")

  @@index([roleId], map: "roleId")
}

enum otp_codes_type {
  REGISTER
  FORGOT_PASSWORD
}

enum users_gender {
  MALE
  FEMALE
  OTHER
}

enum users_provider {
  LOCAL
  GOOGLE
}
